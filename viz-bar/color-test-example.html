<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bar Chart Color Field Test</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
        }
        
        .test-section h3 {
            margin-top: 0;
            color: #1a73e8;
        }
        
        .color-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .color-card {
            background: #f8f9fa;
            border: 1px solid #dadce0;
            border-radius: 4px;
            padding: 15px;
        }
        
        .color-card h4 {
            margin-top: 0;
            color: #202124;
        }
        
        .color-sample {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 8px 0;
        }
        
        .color-preview {
            width: 30px;
            height: 20px;
            border: 1px solid #dadce0;
            border-radius: 3px;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        .data-table th,
        .data-table td {
            border: 1px solid #dadce0;
            padding: 8px 12px;
            text-align: left;
        }
        
        .data-table th {
            background: #f1f3f4;
            font-weight: 600;
        }
        
        .code-example {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .viz-container {
            width: 100%;
            height: 400px;
            border: 1px solid #dadce0;
            border-radius: 6px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® Bar Chart Color Field Test</h1>
        <p>This page demonstrates how the enhanced bar chart handles different color formats in the Color field.</p>
        
        <div class="test-section">
            <h3>üìä Supported Color Formats</h3>
            <div class="color-examples">
                <div class="color-card">
                    <h4>Hex Colors</h4>
                    <div class="color-sample">
                        <div class="color-preview" style="background: #ff0000;"></div>
                        <code>#ff0000</code> (red)
                    </div>
                    <div class="color-sample">
                        <div class="color-preview" style="background: #00ff00;"></div>
                        <code>#00ff00</code> (green)
                    </div>
                    <div class="color-sample">
                        <div class="color-preview" style="background: #0066cc;"></div>
                        <code>#0066cc</code> (blue)
                    </div>
                    <div class="color-sample">
                        <div class="color-preview" style="background: #f39;"></div>
                        <code>#f39</code> (short hex)
                    </div>
                </div>
                
                <div class="color-card">
                    <h4>CSS Named Colors</h4>
                    <div class="color-sample">
                        <div class="color-preview" style="background: red;"></div>
                        <code>red</code>
                    </div>
                    <div class="color-sample">
                        <div class="color-preview" style="background: steelblue;"></div>
                        <code>steelblue</code>
                    </div>
                    <div class="color-sample">
                        <div class="color-preview" style="background: gold;"></div>
                        <code>gold</code>
                    </div>
                    <div class="color-sample">
                        <div class="color-preview" style="background: crimson;"></div>
                        <code>crimson</code>
                    </div>
                </div>
                
                <div class="color-card">
                    <h4>RGB Colors</h4>
                    <div class="color-sample">
                        <div class="color-preview" style="background: rgb(255, 99, 132);"></div>
                        <code>rgb(255, 99, 132)</code>
                    </div>
                    <div class="color-sample">
                        <div class="color-preview" style="background: rgba(54, 162, 235, 0.8);"></div>
                        <code>rgba(54, 162, 235, 0.8)</code>
                    </div>
                </div>
                
                <div class="color-card">
                    <h4>Fallback (String Values)</h4>
                    <div class="color-sample">
                        <div class="color-preview" style="background: #4285f4;"></div>
                        <code>"Category A"</code> ‚Üí Palette Color 1
                    </div>
                    <div class="color-sample">
                        <div class="color-preview" style="background: #34a853;"></div>
                        <code>"Category B"</code> ‚Üí Palette Color 2
                    </div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>üìà Example Data Structure</h3>
            <p>Here's how your data should be structured to use colors effectively:</p>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Category (Dimension)</th>
                        <th>Value (Metric)</th>
                        <th>Color (Dimension)</th>
                        <th>Result</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Product A</td>
                        <td>100</td>
                        <td>#ff6b6b</td>
                        <td>Red bar using hex color</td>
                    </tr>
                    <tr>
                        <td>Product B</td>
                        <td>150</td>
                        <td>steelblue</td>
                        <td>Steel blue bar using CSS name</td>
                    </tr>
                    <tr>
                        <td>Product C</td>
                        <td>200</td>
                        <td>rgb(75, 192, 192)</td>
                        <td>Teal bar using RGB</td>
                    </tr>
                    <tr>
                        <td>Product D</td>
                        <td>75</td>
                        <td>Electronics</td>
                        <td>Palette color based on string</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="test-section">
            <h3>üéØ Usage in Looker Studio</h3>
            <p><strong>Field Configuration:</strong></p>
            <ul>
                <li><strong>Category Field:</strong> Select your dimension for X-axis (e.g., Product Name)</li>
                <li><strong>Value Field:</strong> Select your metric for bar height (e.g., Sales Amount)</li>
                <li><strong>Color Field:</strong> Select your dimension containing color values</li>
            </ul>
            
            <div class="code-example">
// Your Color field can contain any of these formats:

// Hex colors (with or without #)
#ff0000, ff0000, #f00

// CSS named colors
red, blue, steelblue, crimson, gold

// RGB/RGBA values
rgb(255, 0, 0), rgba(255, 0, 0, 0.5)

// String values (uses palette mapping)
"Category A", "High Priority", "Electronics"
            </div>
        </div>
        
        <div class="test-section">
            <h3>üîç Debug Console Output</h3>
            <p>When using the bar chart, check the browser console for color analysis:</p>
            <div class="code-example">
üé® Color field analysis: {
  field: "color_field_name",
  uniqueValues: ["#ff0000", "steelblue", "rgb(75, 192, 192)", "Electronics"],
  validColors: [
    { original: "#ff0000", validated: "#ff0000", isValid: true },
    { original: "steelblue", validated: "steelblue", isValid: true },
    { original: "rgb(75, 192, 192)", validated: "rgb(75, 192, 192)", isValid: true },
    { original: "Electronics", validated: null, isValid: false }
  ]
}
            </div>
        </div>
        
        <div class="test-section">
            <h3>üí° Pro Tips</h3>
            <ul>
                <li><strong>Hex Colors:</strong> Most reliable format, supports both 6-digit (#ff0000) and 3-digit (#f00) formats</li>
                <li><strong>CSS Colors:</strong> Use common names like 'red', 'blue', 'steelblue', 'crimson' for easy readability</li>
                <li><strong>RGB Values:</strong> Great for precise color control and transparency with RGBA</li>
                <li><strong>Mixed Data:</strong> You can mix different formats in the same dataset</li>
                <li><strong>Invalid Colors:</strong> Fall back to the default color palette automatically</li>
                <li><strong>Debug Mode:</strong> Always check the console for color validation results</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h3>üöÄ Next Steps</h3>
            <ol>
                <li>Deploy the updated bar chart using: <code>terraform apply</code></li>
                <li>Use manifest URL: <code>gs://darbnesis-viz-assets/viz-bar</code></li>
                <li>Configure your fields in Looker Studio</li>
                <li>Add color values to your Color field using any supported format</li>
                <li>Check browser console for debug information</li>
            </ol>
        </div>
    </div>
</body>
</html>
